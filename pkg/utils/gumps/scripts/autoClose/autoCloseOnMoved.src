include ":gumps:gumps";

program autoCloseGumpOnMoved(params)
	var mobile := params[1];
	var x := params[2];
	var y := params[3];
	var pid := params[4];
	var ret_val := params[5];

	while ( GetProcess ( pid ) )
        if((mobile.x != x) || (mobile.y != y))
			return GFCloseGump(mobile, pid, ret_val);
		endif
		SleepMS ( 5 );
	endwhile
endprogram
